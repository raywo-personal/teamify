<div class="my-5 card">
  <div class="card-body">
    <h2 class="h5"><i class="bi-upload me-3"></i>Import data</h2>

    <p>What data do you want to import?</p>

    <p class="text-muted">
      When importing persons, please note that associations with time slots,
      prior knowledge, or teams will not be included. Only names (and IDs) will
      be imported. To restore all associations, consider using the
      &ldquo;All data&rdquo; option instead.
    </p>

    <p class="text-muted mb-0">
      Files must be in JSON format, previously exported from the application.
      Alternatively, you can import names using a text file, with each name on
      a separate line.
    </p>


    <div class="row">
      <div class="col">
        <div class="upload-area"
             (dragover)="onDragOver($event)"
             (dragleave)="onDragLeave($event)"
             (drop)="onDrop($event)"
             #dropZone>
          @if (file) {
            <div class="upload-description">
              @if (fileType === "json") {
                <i class="bi-filetype-json display-6"></i>
              } @else if (fileType === "txt") {
                <i class="bi-filetype-txt display-6"></i>
              } @else {
                <i class="bi-file-earmark-x display-6"></i>
              }

              {{ file.name }}
            </div>
          } @else {
            <div class="upload-description">
              <i class="bi-folder2-open display-6"
                 [class.text-danger]="dropError"></i>
              <p class="text-center mb-0">
                <strong>Drop a file</strong><br>
                or click below to browse for a file.
              </p>

              @if (dropError) {
                <p class="upload-error">
                  Only a single JSON or txt file is supported.
                </p>
              }
            </div>
          }

          <label for="upload-input" class="form-label visually-hidden">
            Choose a file to upload
          </label>
          <input type="file"
                 id="upload-input"
                 class="form-control"
                 (change)="onFileChange($event)"
                 [accept]="allowedFileTypes"
                 #fileInput>
        </div>
      </div>

      <div class="col">
        <div class="upload-preview-container">
          @if (fileType === "txt") {
            <h3 class="h6">Importing names</h3>
            <strong class="text-muted">
              The following names will be imported:
            </strong>
          }

          <div class="upload-preview">
            @for (name of contentToImport; track $index) {
              <div class="upload-preview-item">{{ name }}</div>
            }
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="card-footer d-flex justify-content-end gap-2">
    <button type="button"
            class="btn btn-outline-primary">
      Clear data
    </button>
    <button type="button"
            class="btn btn-primary"
            [disabled]="!file">
      Import data
    </button>
  </div>
</div>
