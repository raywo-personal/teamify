<div class="toolbar mb-3"
     role="toolbar"
     aria-label="Toolbar for working with teams and persons">
  <div class="toolbar-buttons">
    <button app-add-button
            caption="Add knowledge item"
            (click)="onAdd(content)">
    </button>

    @if ((knowledgeList$ | async)!.length > 0) {
      <button app-delete-button caption="Clear all prior knowledge"
              confirmationMessage="Are you sure you want to clear all prior knowledge?"
              (deleteConfirmed)="onDeleteAll()">
      </button>
    }
  </div>
</div>

<div class="content-area">
  <ul class="list-group scrollable-area">
    @for (priorKnowledge of knowledgeList$ | async; track priorKnowledge.id) {
      <li class="list-group-item list-group-item-action pointer"
          (click)="onEdit(content, priorKnowledge)">
        <app-prior-knowledge-view [knowledge]="priorKnowledge"
                                  (edit)="onEdit(content, $event)"
                                  (delete)="onDelete($event)"
        />
      </li>
    } @empty {
      <app-data-not-available-view title="No prior knowledge found"
                                   mode="warning"
                                   [messageTemplate]="messageTemplate"/>
    }
  </ul>
</div>

<ng-template #content let-offcanvas>
  <div class="offcanvas-header">
    <h4 class="offcanvas-title" id="offcanvas-basic-title">{{ canvasTitle }}</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="offcanvas.dismiss('Cross click')"></button>
  </div>

  <div class="offcanvas-body">
    <app-prior-knowledge-edit
      [knowledge]="knowledgeToEdit"
      [edit]="edit"
      (cancelled)="onEditCancelled()"
      (saved)="onEditSaved()"
    />
  </div>
</ng-template>


<ng-template #messageTemplate>
  <app-data-not-available-info text="A person's prior knowledge is utilized to
        achieve a good mix of expertise within the team when assembling
        teams later."/>

  <p>
    Begin creating prior knowledge by using the button below.
  </p>

  <button type="button"
          class="btn btn-primary"
          (click)="onAdd(content)">
    Add prior knowledge
  </button>
</ng-template>
